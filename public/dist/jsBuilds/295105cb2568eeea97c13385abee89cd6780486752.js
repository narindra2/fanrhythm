"use strict";$(function(){$("#profile_access_offer_date").on('change',function(){$("#is_offer").prop('checked',true);});$("#is_offer").on('change',function(){$("#profile_access_offer_date").val('');});$('.custom-control-input').on('change',function(){const key=$(this).attr('id');const val=$(this).prop("checked");GeneralSettings.updateFlagSetting(key,val);if(val){if($('.paid-profile-rates').hasClass('d-none')){$('.paid-profile-rates').removeClass('d-none');}}else{if(!$('.paid-profile-rates').hasClass('d-none')){$('.paid-profile-rates').addClass('d-none');}}});});var RatesSettings={};"use strict";$(function(){$('.setting-menu-mobile .nav').mCustomScrollbar({theme:"minimal-dark",axis:'x',scrollInertia:200,});});$(window).scroll(function(){initStickyComponent('.settings-menu-wrapper','sticky-sm');});var GeneralSettings={updateFlagSetting:function(key,value){$.ajax({type:'POST',data:{'key':key,'value':value},dataType:'json',url:app.baseUrl+'/my/settings/flags/save',success:function(result){if(result.success){launchToast('success',trans('Success'),trans('Setting saved'));}
else{launchToast('danger',trans('Error'),trans('Setting save failed'));}},error:function(){launchToast('danger',trans('Error'),trans('Setting save failed'));}});}};"use strict";var AiSuggestions={targetedClass:null,suggestionType:null,initAISuggestions:function(selector,type){this.setTargetedClass(selector);this.setSuggestionType(type);AiSuggestions.setDefaultDescription(type);},suggestDescriptionDialog:function(){$('#suggest-description-dialog').modal('show');},setTargetedClass(className){this.targetedClass=className;},setSuggestionType(type){this.suggestionType=type;},saveSuggestion:function(){let description=$('#ai-request').val();let validDescription=this.validateDescription();if(validDescription){$('#ai-request').removeClass('is-invalid');$('#suggest-description-dialog').modal('hide');if(this.suggestionType=='profile'){ProfileSettings.mdeEditor.value(description);}
else{$(this.targetedClass).val(description);}
$('#ai-request').removeClass('is-invalid');}},clearSuggestion:function(){$('#ai-request').val('');},suggestDescription:function(){let validDescription=this.validateDescription();if(validDescription){$('#ai-request').removeClass('is-invalid');updateButtonState('loading',$('.suggest-description'),trans('Suggest'),'light');let route=app.baseUrl+'/suggestions/generate';let data={'text':$('#ai-request').val(),};$.ajax({type:'POST',data:data,url:route,success:function(response){if(response.message){$('#ai-request').val(response.message);}
updateButtonState('loaded',$('.suggest-description'),trans('Suggest'));},error:function(result){if(result.status===422||result.status===500){launchToast('danger',trans('Error'),result.responseJSON.message);}
else if(result.status===403){launchToast('danger',trans('Error'),'Something went wrong, please try again');}
updateButtonState('loaded',$('.suggest-description'),trans('Suggest'));}});}},validateDescription:function(){let description=$('#ai-request').val();if(description.length<5){$('#ai-request').addClass('is-invalid');return false;}
return true;},setDefaultDescription:function(type){let description;if(type=='post'){description=trans('Write me a short post description to post on my profile');}else if(type=='profile'){description=trans('Write me a short profile bio description');}
if(description){$('#ai-request').val(description);}}};'use strict';$(function(){cardForm.initCardInput()
$(".card-save").on("click",function(){if(!cardForm.validateFieldRequired()){return;}
cardForm.removeError()
cardForm.Submitform()})
$(".required").on("change",function(){cardForm.removeError()})
cardForm.fillCountrySelectOptions();$(".activeThisCard").on("click",function(){let cartId=$(this).data("card_id")
if(cartId){$.ajax({type:"POST",headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:app.baseUrl+'/my/settings/active/card-billing',cache:false,data:{"card_id":cartId},dataType:"json",success:function(response){if(response.success){return location.reload();}else{return location.reload();}},});}})});var cardBox={}
var cardForm={fillCountrySelectOptions:function(){$.ajax({type:'GET',url:app.baseUrl+'/countries',success:function(result){if(result!==null&&typeof result.countries!=='undefined'&&result.countries.length>0){$('.country-select').find('option').remove().end().append('<option value="">'+trans('Select a country')+'</option>');$.each(result.countries,function(i,item){$('.country-select').append($('<option>',{value:item.id,text:item.name,}));});}},});},validateFieldRequired:(element)=>{$("#billing-error").addClass("d-none")
$(".required").each((i,element)=>{if(!$(element).val()){$("#billing-error").removeClass("d-none")
return false;}})
return true;},removeError:()=>{$("#billing-error").addClass("d-none")
$("#saveError").addClass("d-nome")
$("#saveError").html("")},initCardInput:()=>{var month=0;$("#expired_date").on('keypress',function(event){if(event.charCode>=48&&event.charCode<=57){if($(this).val().length===1){$(this).val($(this).val()+event.key+"/");}else if($(this).val().length===0){if(event.key==1||event.key==0){month=event.key;return event.charCode;}else{$(this).val(0+event.key+"/");}}else if($(this).val().length>2&&$(this).val().length<5){return event.charCode;}}
return false;}).on('keyup',function(event){if(event.keyCode==8&&$("#expired_date").val().length==2){$(this).val(month);}})},Submitform:()=>{const data={"name_card":$("input[name='card_name']").val(),"card_number":$("input[name='card_number']").val(),"expired_date":$("input[name='expired_date']").val(),"cvv":$("input[name='cvv']").val(),"billing_name":$("input[name='BillingName']").val(),"billing_last_name":$("input[name='BillinglastName']").val(),"billing_phone":$("input[name='billingPhone']").val(),"billing_address":$("#billingAddress").val(),"active_card":$('input[name="active_card"]:checked').val(),};$.ajax({type:"POST",headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:app.baseUrl+'/my/settings/add/card-billing',cache:false,data:data,dataType:"json",success:function(response){if(response.success){return location.reload();}else{$("#saveError").text(trans('Erreur')+" : "+response.message)
$("#saveError").removeClass("d-none")}},error:function(jqXHR,textStatus,errorThrown){$("#saveError").text(trans('Error')+" :"+textStatus)
$("#saveError").removeClass("d-none")}});},}